# 模块的内聚和耦合
软件工程都在追求“高内聚低耦合”，到底什么是内聚，什么是耦合呢？ 

## 内聚
所谓的内聚是指模块内的交互程度，内聚又分为一下几种:（以下几种内聚程度由低到高排序，越高的聚合越好）
- 偶然性内聚：
    - 介绍：组件的部件是不相关的，只是简单地绑定成单个组件。 
    - 不足：程序的可读性和复用性差
- 逻辑性内聚：
    - 介绍：把相似的功能（类如输入，错误处理）放在一块，通过传递一个参数来决定是哪一个功能来执行。 
    - 不足：接口可读性差，代码复用性低
- 时间性内聚： 
    - 介绍：所有的语句在同一时刻被激活，就像电脑关机的时候，其他所有的程序都要被关闭。
    - 不足：模块内的关联不高，而与模块外的关联却很高，所以在维护的时候工作量会比较大。
- 过程性内聚：
    - 介绍：简单地把一系列过程关联在一起 
    - 不足：代码的复用性比较差
- 通信性内聚： 
    - 介绍：操作相同的输入数据或者输出相同的输出数据，可能产生多种功能。
    - 不足：代码的复用性不高
- 顺序内聚：
    - 介绍：从一个部分的输出作为另一部分的输入。可能包含几个功能或部分不同的功能。 
    - 不足：代码的复用性不高
- 信息聚合：
    - 介绍：执行多个功能，每个函数都有自己的入口点，每个函数都有独立的代码，所有的功能都在相同的数据结构上执行。不同于逻辑衔接，因为功能没有交织在一起。
- 功能内聚：
    - 介绍：每一部分都需要执行一个单一的功能。例如，计算平方根或排序数组。通常在其他情况下可重复使用。维修容易。 

功能内聚是最强的内聚，其优点是它的功能明确。判断一个模块是否功能内聚，一般从模块名称就能看出。如果模块名称只有一个动词和一个特定的目标（单数名词），一般来说就是功能内聚，如：“计算水费”、“计算产值”等模块。功能内聚一般出现在软件结构图的较低层次上。
功能内聚模块的一个重要特点是：他是一个“暗盒”，对于该模块的调用者来说，只需要知道这个模块能做什么，而不需要知道这个模块是如何做的。
总结：在模块划分时，要遵循“一个模块，一个功能”的原则，尽可能使模块达到功能内聚。
高内聚，低耦合的系统有什么好处呢？事实上，短期来看，并没有很明显的好处，甚至短期内会影响系统的开发进度，因为高内聚，低耦合的系统对开发设计人员提出了更高的要求。高内聚，低耦合的好处体现在系统持续发展的过程中，高内聚，低耦合的系统具有更好的重用性，维护性，扩展性，可以更高效的完成系统的维护开发，持续的支持业务的发展，而不会成为业务发展的障碍。
## 耦合 
耦合是指模块之间的交互程度，耦合又分为以下几种：（以下所有的耦合度由高到低排序，越低的耦合越好）
- 内容耦合：一个模块直接操作操作另外一个模块中的内容
- 公共耦合：就像一个类中的全局变量类中的模块都直接操作这个全局变量
- 控制耦合：通过控制标志（作为参数或变量），一个模块控制另一个模块的处理步骤的顺序。
- 印记耦合：如果一组模块通过参数表传递记录信息，就是印记耦合。事实上，这组模块共享了这个记录，它是某一数据结构的子结构，而不是简单变量。这要求这些模块都必须清楚该记录的结构，并按结构要求对此记录进行操作。在设计中应尽量避免这种耦合，它使在数据结构上的操作复杂化了
- 数据耦合：如果一个模块访问另一个模块时，彼此之间是通过数据参数(不是控制参数、公共数据结构或外部变量)来交换输入、输出信息的，则称这种耦合为数据耦合。由于限制了只通过参数表传递数据，按数据耦合开发的程序界面简单、安全可靠。因此，数据耦合是松散的耦合，模块之间的独立性比较强。在软件程序结构中至少必须有这类耦合。

总结：耦合是影响软件复杂程度和设计质量的一个重要因素，为提高模块的独立性，应建立模块间尽可能松散的系统，在设计上我们应采用以下原则：若模块间必须存在耦合，应尽量使用数据耦合，少用控制耦合，慎用或有控制地使用公共耦合，并限制公共耦合的范围，尽量避免内容耦合。